<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>在线聊天室</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="__PUBLIC_HUI__/lib/jquery/1.9.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--&lt;!&ndash; jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) &ndash;&gt;-->
    <!--<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>-->
    <!--&lt;!&ndash; 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 &ndash;&gt;-->
    <!--<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
    <style>
        #msgbox{
            width: 70%;
            height: 450px;
            margin: 0 auto;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #sendbox{
            width: 70%;
            height:auto;
            margin: 0px auto;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<div class="container-fluid">

        <div><h1 style="text-align: center;">简易聊天室V1.0</h1></div>
        <div id="msgbox"></div>
        <div id="sendbox">
            <div class="form-inline">
                <div class="form-group">
                <input type="text" id="msg" class="form-control" onkeydown=" if (window.event.keyCode == 13) {sendMsg()}"/>
                <button type="button"  id="btn"  class="btn btn-info"/>发送消息</button>
                </div>
            </div>
        </div>

</div>
<!--<script src="__PUBLIC_HUI__/lib/jquery/1.9.1/jquery.min.js"></script>-->
<script src="__PUBLIC_HUI__/lib/layer/2.4/layer.js"></script>
<script>
    var ws = new WebSocket('ws://47.93.234.180:6060/');

    //打开链接
    ws.onopen = function (evt) {
        //进入时做一个提示框
        layer.msg('简易版聊天室v1.0!');
    };

    //会话
    ws.onmessage = function (evt) {
        document.getElementById('msgbox').innerHTML += '<p>'+evt.data+'</p>';
    };

    //关闭
    ws.onclose = function (evt) {

    };

    //异常
    ws.onerror = function (evt) {

    };
    $(function () {
        $('#btn').click(function () {
            sendMsg();
        });
    });
    function sendMsg(){
        var msg = $('#msg');
        ws.send(msg.val());
        msg.val('');
    }
</script>
</body>
</html>